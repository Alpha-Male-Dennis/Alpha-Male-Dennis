name: Generate Simple Animated Snake

on:
  workflow_dispatch:
    inputs:
      theme:
        description: "Theme (cyberpunk/github/matrix)"
        required: false
        default: "cyberpunk"

env:
  USERNAME: "Alpha-Male-Dennis"

jobs:
  generate-snake:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: Generate snake
        run: |
          cat > snake_generator.py << 'EOF'
          import datetime
          import math
          import random
          
          # Simple theme definitions
          THEMES = {
              "cyberpunk": {
                  "bg": "#0a0e17",
                  "snake": "#00ff9d",
                  "collectible": "#ff0055",
                  "text": "#ffffff",
                  "accent": "#00ff9d"
              },
              "github": {
                  "bg": "#0d1117",
                  "snake": "#58a6ff",
                  "collectible": "#f78166",
                  "text": "#f0f6fc",
                  "accent": "#58a6ff"
              },
              "matrix": {
                  "bg": "#001100",
                  "snake": "#00ff41",
                  "collectible": "#00ff41",
                  "text": "#00ff41",
                  "accent": "#00ff41"
              }
          }
          
          # Get theme (default to cyberpunk)
          theme_name = "${{ github.event.inputs.theme || 'cyberpunk' }}"
          theme = THEMES.get(theme_name, THEMES["cyberpunk"])
          username = "Alpha-Male-Dennis"
          date_str = datetime.datetime.utcnow().strftime("%Y-%m-%d %H:%M UTC")
          
          # Generate snake path points
          points = []
          for i in range(30):
              x = 100 + i * 30
              y = 200 + 50 * math.sin(i * 0.4)
              points.append((x, y))
          
          # Create SVG
          svg = f'''<?xml version="1.0" encoding="UTF-8"?>
          <svg width="1000" height="400" viewBox="0 0 1000 400" xmlns="http://www.w3.org/2000/svg">
            <style>
              @keyframes moveSnake {{
                0% {{ transform: translate(0px, 0px); }}
                100% {{ transform: translate(870px, 0px); }}
              }}
              
              @keyframes pulse {{
                0%, 100% {{ opacity: 1; transform: scale(1); }}
                50% {{ opacity: 0.7; transform: scale(1.1); }}
              }}
              
              .snake {{ 
                animation: moveSnake 10s linear infinite;
              }}
              
              .collectible {{
                animation: pulse 2s infinite;
              }}
            </style>
            
            <rect width="100%" height="100%" fill="{theme['bg']}"/>
            
            <text x="500" y="50" text-anchor="middle" font-family="Arial" font-size="28" fill="{theme['accent']}" font-weight="bold">
              {username}'s GitHub Snake
            </text>
            
            <text x="500" y="80" text-anchor="middle" font-family="Arial" font-size="14" fill="{theme['text']}">
              Updated {date_str}
            </text>
            
            <!-- Snake -->
            <g class="snake">
              <circle cx="100" cy="200" r="15" fill="{theme['snake']}"/>
              <circle cx="85" cy="200" r="10" fill="{theme['snake']}" opacity="0.8"/>
              <circle cx="70" cy="200" r="8" fill="{theme['snake']}" opacity="0.6"/>
            </g>
            
            <!-- Collectibles -->
            <circle class="collectible" cx="300" cy="200" r="12" fill="{theme['collectible']}"/>
            <circle class="collectible" cx="500" cy="180" r="10" fill="{theme['collectible']}"/>
            <circle class="collectible" cx="700" cy="220" r="14" fill="{theme['collectible']}"/>
            <circle class="collectible" cx="900" cy="190" r="11" fill="{theme['collectible']}"/>
            
            <!-- Path line -->
            <path d="M 100 200 C 200 150, 400 250, 500 180 S 800 230, 900 190" 
                  fill="none" stroke="{theme['text']}" stroke-width="2" stroke-dasharray="5,5" opacity="0.3"/>
            
            <text x="500" y="380" text-anchor="middle" font-family="Arial" font-size="12" fill="{theme['text']}">
              üêç Snake animation | Theme: {theme_name}
            </text>
          </svg>'''
          
          # Save files
          with open("snake.svg", "w") as f:
              f.write(svg)
          
          print("Generated snake.svg successfully!")
          
          # Create a simple README
          with open("README.md", "w") as f:
              f.write(f"""# üêç GitHub Snake Animation
              
              ## {username}'s Animated Snake
              
              **Last Updated**: {date_str}
              
              **Theme**: {theme_name}
              
              ![Snake Animation](snake.svg)
              
              ---
              
              This animation is automatically generated daily.
              """)
          EOF
          
          python snake_generator.py
          
          echo "Generated files:"
          ls -la

      - name: Commit and push
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add snake.svg README.md
          git commit -m "Update snake animation" || echo "No changes to commit"
          git push
